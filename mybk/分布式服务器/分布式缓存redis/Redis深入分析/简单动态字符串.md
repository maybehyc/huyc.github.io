# 简单动态字符串

Redis没有直接使用C语言的传统字符串表示,而是自己构建了一种名为简单动态字符串(simple dynamic string, SDS)的抽象类型,并将SDS用作Redis的默认字符串表示

SDS的定义

typedef char *sds;

struct sdshdr {
        // 记录 buf 数组中已使用字节的数量
        // 等于 SDS 所保存字符串的长度
        int len;
        // 记录 buf 数组中未使用字节的数量
        int free;
        // 字节数组，用于保存字符串
        char buf[];
};

SDS与C字符串的区别(性能、安全性):

1.常熟复杂度获取字符串长度
    C字符串获取长度复杂度为O(N)
    SDS获取长度复杂度为O(1)
2.杜绝缓冲区溢出
3.减少修改字符串时带来的内存分配次(采用空间预分配、惰性空间释放)
4.二进制安全
    C字符串以空格末尾表示
    SDS存储了长度,能保存图片、音频、视频、压缩文件等二进制数据
5.兼容部分C字符串函数
    
